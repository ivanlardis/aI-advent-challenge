# Project Assistant

RAG CLI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –Ω–∞ Kotlin.

## –û–ø–∏—Å–∞–Ω–∏–µ

Standalone CLI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø—Ä–æ–µ–∫—Ç–∞ (Java, Kotlin, Markdown —Ñ–∞–π–ª—ã) –∏ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º RAG –∏ OpenRouter API.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîç –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞ (.kt, .java, .md)
- ü§ñ –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º RAG + LLM
- üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Git (–≤–µ—Ç–∫–∞, –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç, —Å—Ç–∞—Ç—É—Å)
- üí¨ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π CLI —Ä–µ–∂–∏–º
- ü§ñ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–≤—å—é Pull Request —á–µ—Ä–µ–∑ CI/CD** (–Ω–æ–≤–æ–µ!)
- üì¶ –£–ø–∞–∫–æ–≤–∫–∞ –≤ single JAR —Ñ–∞–π–ª

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- JDK 17+
- Gradle 8.x

### –°–±–æ—Ä–∫–∞

```bash
./gradlew clean build shadowJar
```

–†–µ–∑—É–ª—å—Ç–∞—Ç: `build/libs/project-assistant-1.0.0.jar`

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫

```bash
java -jar build/libs/project-assistant-1.0.0.jar --home /path/to/your/project
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —É–∫–∞–∂–∏—Ç–µ API –∫–ª—é—á OpenRouter –≤ —Ñ–∞–π–ª–µ:
`src/main/kotlin/config/Config.kt`

```kotlin
const val OPENROUTER_API_KEY = "sk-or-v1-YOUR-KEY-HERE"
const val OPENROUTER_MODEL = "anthropic/claude-3.5-sonnet"
```

### –ö–æ–º–∞–Ω–¥—ã

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã:

- `/index` - –ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
- `/help` - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É
- `/git` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- `/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–Ω–¥–µ–∫—Å–∞
- `/exit` - –í—ã—Ö–æ–¥

### –ü—Ä–∏–º–µ—Ä—ã

```bash
> /index
–ù–∞—á–∏–Ω–∞—é –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é –ø—Ä–æ–µ–∫—Ç–∞...
–ù–∞–π–¥–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: 42
–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤...
–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!

=== –†–µ–∑—É–ª—å—Ç–∞—Ç –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ ===
–í—Å–µ–≥–æ —Ñ–∞–π–ª–æ–≤: 42
  Kotlin:   30
  Java:     5
  Markdown: 7

> –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è?
–ü–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤...
–ù–∞–π–¥–µ–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: 5
  1. src/auth/AuthService.kt (score: 0.87)
  2. src/auth/JwtProvider.kt (score: 0.72)
  ...

–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∫ LLM...

=== –û—Ç–≤–µ—Ç ===
–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ JWT —Ç–æ–∫–µ–Ω—ã...
```

## ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–≤—å—é Pull Request

–ü—Ä–æ–µ–∫—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ AI-—Ä–µ–≤—å—é PR —á–µ—Ä–µ–∑ GitHub Actions.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CI/CD

1. **–î–æ–±–∞–≤—å—Ç–µ —Å–µ–∫—Ä–µ—Ç –≤ GitHub repository:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Settings ‚Üí Secrets and variables ‚Üí Actions
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Å–µ–∫—Ä–µ—Ç `OPENROUTER_API_KEY` —Å –≤–∞—à–∏–º API –∫–ª—é—á–æ–º

2. **Workflow —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω:**
   - –§–∞–π–ª `.github/workflows/pr-review.yml` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ PR
   - –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (.kt, .java, .md)
   - –ü—É–±–ª–∏–∫—É–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å –∑–∞–º–µ—á–∞–Ω–∏—è–º–∏

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ PR Review

```bash
# –°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
./gradlew shadowJar

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
export OPENROUTER_API_KEY="your-key"
export GITHUB_TOKEN="your-github-token"

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ä–µ–≤—å—é –¥–ª—è PR #123
java -jar build/libs/project-assistant-*.jar review-pr --pr-number=123
```

### –ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ workflow, –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–∏—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ PR:

```markdown
## üìä –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞
‚úÖ –•–æ—Ä–æ—à–æ - –∫–æ–¥ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π, –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

## ‚úÖ –ß—Ç–æ —Ö–æ—Ä–æ—à–æ
- –ß–µ—Ç–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–ª–∞—Å—Å–æ–≤ –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- –•–æ—Ä–æ—à–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ data classes

## ‚ö†Ô∏è –ó–∞–º–µ—á–∞–Ω–∏—è
- **src/main/kotlin/service/UserService.kt**: –§—É–Ω–∫—Ü–∏—è createUser —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–∞—è
- **src/main/kotlin/model/User.kt**: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—è email

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- –î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö –º–µ—Ç–æ–¥–æ–≤
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—É–±–ª–∏—á–Ω—ã–µ API

---
*–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Ñ–∞–π–ª–æ–≤: 5 | Powered by Grok 4.1 Fast*
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–µ–≤—å—é –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ `Config.kt`:
- `REVIEW_MAX_FILES = 30` - –º–∞–∫—Å–∏–º—É–º —Ñ–∞–π–ª–æ–≤ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
- `REVIEW_MAX_LINES_PER_FILE = 500` - –º–∞–∫—Å–∏–º—É–º —Å—Ç—Ä–æ–∫ –Ω–∞ —Ñ–∞–π–ª

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
src/main/kotlin/
‚îú‚îÄ‚îÄ Main.kt                   # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ Config.kt            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ cli/
‚îÇ   ‚îú‚îÄ‚îÄ AssistantCommand.kt  # CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º)
‚îÇ   ‚îî‚îÄ‚îÄ ReviewCommand.kt     # CLI –¥–ª—è PR Review
‚îú‚îÄ‚îÄ review/                   # –ú–æ–¥—É–ª—å PR Review
‚îÇ   ‚îú‚îÄ‚îÄ Models.kt            # Data classes
‚îÇ   ‚îú‚îÄ‚îÄ GitDiffExtractor.kt  # –ü–æ–ª—É—á–µ–Ω–∏–µ diff —á–µ—Ä–µ–∑ gh CLI
‚îÇ   ‚îú‚îÄ‚îÄ ReviewPromptBuilder.kt  # –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ PRAnalysisService.kt    # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∞–Ω–∞–ª–∏–∑–∞
‚îÇ   ‚îî‚îÄ‚îÄ GitHubCommentPublisher.kt  # –ü—É–±–ª–∏–∫–∞—Ü–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
‚îú‚îÄ‚îÄ rag/
‚îÇ   ‚îú‚îÄ‚îÄ InMemoryVectorStore.kt
‚îÇ   ‚îú‚îÄ‚îÄ RagService.kt
‚îÇ   ‚îú‚îÄ‚îÄ DocumentIndexer.kt
‚îÇ   ‚îî‚îÄ‚îÄ embeddings/
‚îÇ       ‚îú‚îÄ‚îÄ Vectorizer.kt                # –û–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îÇ       ‚îú‚îÄ‚îÄ OnnxEmbeddingVectorizer.kt   # –û—Å–Ω–æ–≤–Ω–æ–π ONNX –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ç–æ—Ä
‚îÇ       ‚îî‚îÄ‚îÄ LegacyTfIdfVectorizer.kt     # TF-IDF (legacy)
‚îú‚îÄ‚îÄ resources/
‚îÇ   ‚îî‚îÄ‚îÄ models/                         # ONNX –º–æ–¥–µ–ª—å + —Ç–æ–∫–µ–Ω–∏–∑–∞—Ç–æ—Ä
‚îú‚îÄ‚îÄ llm/
‚îÇ   ‚îú‚îÄ‚îÄ OpenRouterClient.kt  # LLM –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îî‚îÄ‚îÄ PromptBuilder.kt
‚îú‚îÄ‚îÄ mcp/
‚îÇ   ‚îú‚îÄ‚îÄ GitTools.kt          # Git –æ–ø–µ—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ McpServer.kt
‚îî‚îÄ‚îÄ parser/
    ‚îú‚îÄ‚îÄ FileParser.kt
    ‚îú‚îÄ‚îÄ KotlinParser.kt
    ‚îú‚îÄ‚îÄ JavaParser.kt
    ‚îî‚îÄ‚îÄ MarkdownParser.kt
```

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Kotlin 1.9** - —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- **Gradle 8** - —Å–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
- **Shadow Plugin** - —É–ø–∞–∫–æ–≤–∫–∞ –≤ fat JAR
- **Clikt** - CLI framework
- **Ktor Client** - HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è OpenRouter
- **JGit** - Git –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- **ONNX embeddings** - –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ (Sentence Transformers)

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ó–∞–ø—É—Å–∫ –≤ dev —Ä–µ–∂–∏–º–µ

```bash
./gradlew run --args="--home /path/to/project"
```

### –¢–µ—Å—Ç—ã

```bash
./gradlew test
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
